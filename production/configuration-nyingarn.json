{
    "ui": {
        "siteName": "Nyingarn Platform workspace",
        "tusEndpoint": "https://tus.nyingarn.net/files/",
        "termsAndConditionsOfUse": "https://nyingarn.net/nyingarn-workspace-terms-and-conditions-of-use/",
        "itemName": {
            "help": "Must consist start with a letter and can have the following characters only: a-z, A-Z, 0-9 and _.",
            "checkNameStructure": "^[a-z,A-Z][a-z,A-Z,0-9,_]+$"
        },
        "filename": {
            "matchItemName": true,
            "helpName": "Filenames must match the form {item identifier}-{sequence number}. {item identifier} must consist only of alphanumeric characters and must start with a letter.",
            "checkNameStructure": "^[a-z,A-Z][a-z,A-Z,0-9,_]+-0*[1-9]*\\..*$",
            "helpExtension": "Accepted file types: jpg, jpeg, png, tif, pdf",
            "checkExtension": ".*\\.(jpg|JPG|jpeg|JPEG|pdf|PDF|tif|TIF|png|PNG)$"
        }
    },
    "api": {
        "administrators": ["{email of an administrator}"],
        "session": {
            "lifetime": { "hours": 5 },
            "secret": "{some secret}"
        },
        "teiMarkupControls": "/srv/tei-markup-controls.json",
        "filenaming": {
            "adminTag": "ADMIN",
            "resourceQualifierSeparator": ".",
            "identifierSegments": {
                "2": ["itemId", "resourceId"],
                "3": ["collectionId", "itemId", "resourceId"]
            }
        },
        "processing": {
            "requiredStages": ["thumbnails", "webformats", "ocr"],
            "exchange": "nyingarn",
            "stages": {
                "/process/thumbnails": { "order": 0 },
                "/process/webformats": { "order": 0, "subtasks": ["/process/ocr"] },
                "/process/ocr": []
            },
            "controls": [
                {
                    "name": "Create Image Thumbnails",
                    "description": "Create image thumbnails",
                    "route": "/process/thumbnails",
                    "automatic": true
                },
                {
                    "name": "Create Image Web Formats",
                    "description": "Create image versions suitable for display on the web",
                    "route": "/process/webformats",
                    "automatic": true
                },
                {
                    "name": "Run OCR",
                    "description": "Pass the images through Tesseract OCR to try to extract the text",
                    "route": "/process/ocr",
                    "automatic": true
                }
            ]
        },
        "services": {
            "rabbit": {
                "host": "rabbit",
                "user": "guest",
                "pass": "guest",
                "port": "5672",
                "exchanges": [
                    {
                        "name": "nyingarn",
                        "type": "fanout",
                        "autoDelete": false,
                        "persistent": false
                    }
                ],
                "queues": [
                    {
                        "name": "nyingarn_tasks",
                        "autoDelete": true,
                        "subscribe": true,
                        "limit": 1
                    }
                ],
                "bindings": [
                    {
                        "exchange": "nyingarn",
                        "target": "nyingarn_tasks",
                        "keys": []
                    }
                ]
            },
            "s3": {
                "provider": "Minio",
                "endpointUrl": "https://s3.nyingarn.net",
                "forcePathStyle": true,
                "bucket": "development",
                "awsAccessKeyId": "{access key to access a bucket}",
                "awsSecretAccessKey": "{secret key to access a bucket}",
                "region": "us-east-1"
            },
            "describo": {
                "authorization": "{ describo secret }",
                "url": "https://describo.nyingarn.net"
            }
        },
        "authentication": {
            "google": {
                "clientId": "{client identifier}.apps.googleusercontent.com",
                "clientSecret": "{client secret}",
                "redirectUri": "https://workspace.nyingarn.net/callback-google-login",
                "discover": "https://accounts.google.com"
            },
            "aaf": {
                "clientId": "{client identifier}",
                "clientSecret": "{client secret}",
                "redirectUri": "https://workspace.nyingarn.net/callback-aaf-login",
                "discover": "https://central.aaf.edu.au"
            }
        }
    }
}
