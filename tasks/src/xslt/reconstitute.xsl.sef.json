{"N":"package","version":"30","packageVersion":"1","saxonVersion":"SaxonJS 2.5","target":"JS","targetVersion":"2","name":"TOP-LEVEL","relocatable":"false","buildDateTime":"2023-02-21T06:45:03.083Z","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","defaultElementNS":"http://www.tei-c.org/ns/1.0","C":[{"N":"co","id":"0","uniform":"true","binds":"2","C":[{"N":"template","flags":"os","module":"reconstitute.xsl","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","name":"Q{http://www.w3.org/1999/XSL/Transform}initial-template","line":"14","expand-text":"true","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","sType":"* ","C":[{"N":"sequence","role":"body","sType":"* ","C":[{"N":"param","name":"Q{}files","slot":"0","sType":"* ","as":"* ","flags":"","line":"15","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"0","sType":"* "}]},{"N":"param","name":"Q{}identifier","slot":"1","sType":"* ","as":"* ","flags":"","line":"16","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"1","sType":"* "}]},{"N":"param","name":"Q{}page-identifier-regex","slot":"2","sType":"* ","as":"* ","flags":"","line":"17","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"2","sType":"* "}]},{"N":"param","name":"Q{}base-uri","slot":"3","sType":"* ","as":"* ","flags":"","line":"18","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"3","sType":"* "}]},{"N":"let","var":"Q{}surface-files","slot":"4","sType":"* ","line":"23","C":[{"N":"filter","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"23","C":[{"N":"filter","C":[{"N":"fn","name":"sort","C":[{"N":"fn","name":"tokenize","C":[{"N":"treat","as":"AS","diag":"0|0||tokenize","C":[{"N":"check","card":"?","diag":"0|0||tokenize","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||tokenize","C":[{"N":"check","card":"?","diag":"0|0||tokenize","C":[{"N":"data","diag":"0|0||tokenize","C":[{"N":"varRef","name":"Q{}files","slot":"0"}]}]}]}]}]}]},{"N":"str","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"}]},{"N":"fn","name":"starts-with","C":[{"N":"treat","as":"AS","diag":"0|0||starts-with","C":[{"N":"check","card":"?","diag":"0|0||starts-with","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||starts-with","C":[{"N":"atomSing","diag":"0|0||starts-with","card":"?","C":[{"N":"dot"}]}]}]}]},{"N":"fn","name":"concat","C":[{"N":"check","card":"?","diag":"undefined|0||concat","C":[{"N":"data","diag":"undefined|0||concat","C":[{"N":"varRef","name":"Q{}identifier","slot":"1"}]}]},{"N":"str","val":"-"}]},{"N":"str","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"}]}]},{"N":"fn","name":"matches","C":[{"N":"treat","as":"AS","diag":"0|0||matches","C":[{"N":"check","card":"?","diag":"0|0||matches","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||matches","C":[{"N":"atomSing","diag":"0|0||matches","card":"?","C":[{"N":"dot"}]}]}]}]},{"N":"treat","as":"AS","diag":"0|1||matches","C":[{"N":"check","card":"1","diag":"0|1||matches","C":[{"N":"cvUntyped","to":"AS","diag":"0|1||matches","C":[{"N":"check","card":"1","diag":"0|1||matches","C":[{"N":"data","diag":"0|1||matches","C":[{"N":"varRef","name":"Q{}page-identifier-regex","slot":"2"}]}]}]}]}]}]}]},{"N":"let","var":"Q{}ro-crate","slot":"5","sType":"* ","line":"26","C":[{"N":"fn","name":"json-doc","sType":"?","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"26","C":[{"N":"convert","to":"AS","flags":"","C":[{"N":"fn","name":"resolve-uri","C":[{"N":"str","val":"ro-crate-metadata.json"},{"N":"treat","as":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"cvUntyped","to":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"data","diag":"0|1||resolve-uri","C":[{"N":"varRef","name":"Q{}base-uri","slot":"3"}]}]}]}]}]}]}]}]},{"N":"let","var":"Q{}ro-crate-properties","slot":"6","sType":"* ","line":"27","C":[{"N":"lookupAll","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"27","C":[{"N":"treat","as":"F","diag":"null|0||lookupAll","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"check","card":"1","diag":"0|0|XPTY0004|apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"varRef","name":"Q{}ro-crate","slot":"5"}]}]},{"N":"arrayBlock","C":[{"N":"str","val":"@graph"}]}]}]}]},{"N":"let","var":"Q{}ro-crate-root-id","slot":"7","sType":"* ","line":"37","C":[{"N":"forEach","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"37","C":[{"N":"forEach","C":[{"N":"filter","C":[{"N":"varRef","name":"Q{}ro-crate-properties","slot":"6"},{"N":"fn","name":"starts-with","C":[{"N":"treat","as":"AS","diag":"0|0||starts-with","C":[{"N":"check","card":"?","diag":"0|0||starts-with","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||starts-with","C":[{"N":"check","card":"?","diag":"0|0||starts-with","C":[{"N":"data","diag":"0|0||starts-with","C":[{"N":"forEach","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"conformsTo"}]}]},{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"@id"}]}]}]}]}]}]}]}]},{"N":"str","val":"https://w3id.org/ro/crate/"},{"N":"str","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"}]}]},{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"about"}]}]}]},{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"@id"}]}]}]},{"N":"let","var":"Q{}ro-crate-root-properties","slot":"8","sType":"* ","line":"41","C":[{"N":"filter","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"41","C":[{"N":"varRef","name":"Q{}ro-crate-properties","slot":"6"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"@id"}]}]}]},{"N":"data","diag":"1|1||gc","C":[{"N":"varRef","name":"Q{}ro-crate-root-id","slot":"7"}]}]}]},{"N":"let","var":"Q{}surfaces","slot":"9","sType":"* ","line":"44","C":[{"N":"forEach","sType":"*ND","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"44","C":[{"N":"forEach","C":[{"N":"varRef","name":"Q{}surface-files","slot":"4"},{"N":"fn","name":"resolve-uri","C":[{"N":"treat","as":"AS","diag":"0|0||resolve-uri","C":[{"N":"check","card":"?","diag":"0|0||resolve-uri","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||resolve-uri","C":[{"N":"atomSing","diag":"0|0||resolve-uri","card":"?","C":[{"N":"dot"}]}]}]}]},{"N":"treat","as":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"cvUntyped","to":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"data","diag":"0|1||resolve-uri","C":[{"N":"varRef","name":"Q{}base-uri","slot":"3"}]}]}]}]}]}]}]},{"N":"fn","name":"doc","C":[{"N":"convert","to":"AS","flags":"","C":[{"N":"dot"}]}]}]},{"N":"resultDoc","sType":"0 ","line":"53","local":"","global":"indent=yes\nmethod=xml\n","C":[{"N":"fn","name":"concat","sType":"1AS ","role":"href","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"varRef","name":"Q{}identifier","slot":"1","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"53"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]},{"N":"str","sType":"1AS ","val":"-tei-complete.xml"},{"N":"str","sType":"1AS ","val":""}]},{"N":"elem","name":"TEI","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}TEI ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","role":"content","line":"63","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"xml:id","nsuri":"http://www.w3.org/XML/1998/namespace","sType":"1NA ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"varRef","name":"Q{}identifier","slot":"1","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"63"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"elem","name":"teiHeader","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}teiHeader ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"64","C":[{"N":"elem","name":"fileDesc","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}fileDesc ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"65","C":[{"N":"sequence","sType":"*NE ","C":[{"N":"elem","name":"titleStmt","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}titleStmt ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"66","C":[{"N":"elem","name":"title","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}title ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"67","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"67","C":[{"N":"check","card":"1","diag":"0|0|XPTY0004|apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"varRef","name":"Q{}ro-crate-root-properties","slot":"8"}]}]},{"N":"arrayBlock","C":[{"N":"str","val":"name"}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]},{"N":"elem","name":"publicationStmt","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}publicationStmt ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"69","C":[{"N":"elem","name":"publisher","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}publisher ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"70","C":[{"N":"elem","name":"ref","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}ref ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"target","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://nyingarn.net/"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Nyingarn"}]}]}]}]}]},{"N":"elem","name":"sourceDesc","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}sourceDesc ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"72","C":[{"N":"elem","name":"p","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}p ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"73","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"73","C":[{"N":"check","card":"1","diag":"0|0|XPTY0004|apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"varRef","name":"Q{}ro-crate-root-properties","slot":"8"}]}]},{"N":"arrayBlock","C":[{"N":"str","val":"description"}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]},{"N":"elem","name":"xenoData","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}xenoData ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"75","C":[{"N":"fn","name":"serialize","sType":"1AS","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"76","C":[{"N":"varRef","name":"Q{}ro-crate","slot":"5"},{"N":"map","C":[{"N":"str","val":"method"},{"N":"str","val":"json"},{"N":"str","val":"indent"},{"N":"true"}]}]}]}]}]}]},{"N":"elem","name":"text","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}text ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"80","C":[{"N":"applyT","sType":"* ","line":"81","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"varRef","name":"Q{}surfaces","slot":"9","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"81"}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"N":"co","id":"1","uniform":"true","binds":"1","C":[{"N":"template","flags":"os","module":"reconstitute.xsl","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","name":"Q{}reconstitute","line":"112","expand-text":"true","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","sType":"* ","C":[{"N":"sequence","role":"body","sType":"* ","C":[{"N":"param","name":"Q{}content","slot":"0","sType":"* ","as":"* ","flags":"","line":"118","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"0","sType":"* "}]},{"N":"forEachGroup","sType":"* ","algorithm":"starting","line":"125","C":[{"N":"varRef","name":"Q{}content","slot":"0","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"125"},{"N":"p.venn","op":"union","role":"match","sType":"1NE","C":[{"N":"p.withPredicate","role":"match","sType":"1NE","C":[{"N":"p.nodeTest","test":"NE"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}part"},{"N":"str","val":"I"}]}]},{"N":"p.withPredicate","role":"match","sType":"1N u[NT,NP,NC,NE]","C":[{"N":"p.withPredicate","C":[{"N":"p.nodeTest","test":"N u[NT,NP,NC,NE]"},{"N":"fn","name":"not","C":[{"N":"axis","name":"self","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}pb"}]}]},{"N":"fn","name":"not","C":[{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}part"}]}]}]},{"N":"str","sType":"1AS ","role":"collation","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"},{"N":"choose","sType":"* ","type":"item()*","role":"content","line":"126","C":[{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ fn=~ xsl=~ ","line":"127","C":[{"N":"attVal","name":"Q{}part"},{"N":"str","val":"I"}]},{"N":"copy","sType":"1 ","flags":"cin","line":"130","C":[{"N":"sequence","sType":"* ","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","line":"131","sType":"*NA","C":[{"N":"except","op":"except","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"131","C":[{"N":"axis","name":"attribute","nodeTest":"*NA"},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}part"}]}]},{"N":"callT","bSlot":"0","sType":"* ","name":"Q{}reconstitute","line":"132","C":[{"N":"withParam","name":"Q{}content","slot":"0","sType":"*N","C":[{"N":"docOrder","sType":"*N","role":"select","line":"133","C":[{"N":"docOrder","sType":"*N","ns":"= xml=~ fn=~ xsl=~ ","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"currentGroup"}]},{"N":"union","op":"|","C":[{"N":"axis","name":"self","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}pb"},{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]"}]}]}]}]}]}]}]}]},{"N":"true"},{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","line":"139","sType":"*","C":[{"N":"currentGroup","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"139"}]}]}]}]}]}]},{"N":"co","id":"2","binds":"2","C":[{"N":"mode","onNo":"SC","flags":"","patternSlots":"0","name":"Q{}surface-to-text","prec":"","C":[{"N":"templateRule","rank":"0","prec":"0","seq":"2","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","minImp":"0","flags":"s","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"110","module":"reconstitute.xsl","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","expand-text":"true","match":"line[preceding-sibling::*[1]/self::line]","prio":"0.5","matches":"NE nQ{http://www.tei-c.org/ns/1.0}line","C":[{"N":"p.withPredicate","role":"match","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}line","ns":"= xml=~ fn=~ xsl=~ ","C":[{"N":"p.nodeTest","test":"NE nQ{http://www.tei-c.org/ns/1.0}line"},{"N":"slash","op":"/","C":[{"N":"fn","name":"reverse","C":[{"N":"first","C":[{"N":"axis","name":"preceding-sibling","nodeTest":"*NE"}]}]},{"N":"axis","name":"self","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}line"}]}]},{"N":"empty","sType":"0 ","role":"action"}]},{"N":"templateRule","rank":"1","prec":"0","seq":"1","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","minImp":"0","flags":"s","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"98","module":"reconstitute.xsl","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","expand-text":"true","match":"line","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}line","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}line","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}line","ns":"= xml=~ fn=~ xsl=~ "},{"N":"elem","type":"element()","role":"action","name":"ab","sType":"1NE ","nsuri":"http://www.tei-c.org/ns/1.0","line":"99","C":[{"N":"sequence","sType":"* ","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","line":"100","sType":"*NA","C":[{"N":"axis","name":"attribute","nodeTest":"*NA","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"100"}]},{"N":"applyT","sType":"* ","line":"101","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]","sType":"*N u[NT,NP,NC,NE]","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"101"}]},{"N":"forEach","sType":"* ","line":"102","C":[{"N":"docOrder","sType":"*N","role":"select","line":"102","C":[{"N":"fn","name":"key","sType":"*N","ns":"= xml=~ fn=~ xsl=~ ","C":[{"N":"str","val":"lines-by-first-line-id"},{"N":"fn","name":"generate-id","C":[{"N":"dot"}]}]}]},{"N":"sequence","sType":"* ","C":[{"N":"elem","type":"element()","name":"lb","sType":"1NE ","nsuri":"http://www.tei-c.org/ns/1.0","line":"103","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","sType":"*NA","C":[{"N":"axis","name":"attribute","nodeTest":"*NA","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"7"}]}]},{"N":"applyT","sType":"* ","line":"104","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]","sType":"*N u[NT,NP,NC,NE]","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"104"}]}]}]}]}]}]},{"N":"templateRule","rank":"2","prec":"0","seq":"0","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","minImp":"0","flags":"s","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"90","module":"reconstitute.xsl","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","expand-text":"true","match":"surface","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}surface","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}surface","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}surface","ns":"= xml=~ fn=~ xsl=~ "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"elem","type":"element()","name":"pb","sType":"1NE ","nsuri":"http://www.tei-c.org/ns/1.0","line":"91","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","sType":"*NA","C":[{"N":"axis","name":"attribute","nodeTest":"*NA","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"3"}]}]},{"N":"applyT","sType":"* ","line":"92","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]","sType":"*N u[NT,NP,NC,NE]","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"92"}]}]}]}]}]},{"N":"co","binds":"","id":"3","C":[{"N":"mode","onNo":"TC","flags":"","patternSlots":"0","prec":""}]},{"N":"overridden"},{"N":"key","binds":"","name":"Q{}lines-by-first-line-id","flags":"u","module":"reconstitute.xsl","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"97","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}line","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}line","ns":"= xml=~ fn=~ xsl=~ "},{"N":"data","role":"use","C":[{"N":"data","C":[{"N":"fn","name":"generate-id","sType":"1AS","ns":"= xml=~ fn=~ xsl=~ ","line":"97","C":[{"N":"fn","name":"reverse","C":[{"N":"lastOf","C":[{"N":"axis","name":"preceding-sibling","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}line"}]}]}]}]}]}]},{"N":"output","C":[{"N":"property","name":"Q{http://saxon.sf.net/}stylesheet-version","value":"30"},{"N":"property","name":"indent","value":"yes"},{"N":"property","name":"method","value":"xml"}]},{"N":"decimalFormat"}],"Σ":"530ea37f"}
=======
{"N":"package","version":"30","packageVersion":"1","saxonVersion":"SaxonJS 2.5","target":"JS","targetVersion":"2","name":"TOP-LEVEL","relocatable":"false","buildDateTime":"2023-03-10T08:10:05.801Z","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","defaultElementNS":"http://www.tei-c.org/ns/1.0","C":[{"N":"co","id":"0","uniform":"true","binds":"2 4","C":[{"N":"template","flags":"os","module":"reconstitute.xsl","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","name":"Q{http://www.w3.org/1999/XSL/Transform}initial-template","line":"9","expand-text":"true","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","sType":"* ","C":[{"N":"sequence","role":"body","sType":"* ","C":[{"N":"param","name":"Q{}files","slot":"0","sType":"* ","as":"* ","flags":"","line":"10","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"0","sType":"* "}]},{"N":"param","name":"Q{}identifier","slot":"1","sType":"* ","as":"* ","flags":"","line":"11","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"1","sType":"* "}]},{"N":"param","name":"Q{}page-identifier-regex","slot":"2","sType":"* ","as":"* ","flags":"","line":"12","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"2","sType":"* "}]},{"N":"param","name":"Q{}base-uri","slot":"3","sType":"* ","as":"* ","flags":"","line":"13","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"3","sType":"* "}]},{"N":"let","var":"Q{}surface-files","slot":"4","sType":"* ","line":"19","C":[{"N":"filter","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"19","C":[{"N":"filter","C":[{"N":"fn","name":"sort","C":[{"N":"fn","name":"tokenize","C":[{"N":"treat","as":"AS","diag":"0|0||tokenize","C":[{"N":"check","card":"?","diag":"0|0||tokenize","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||tokenize","C":[{"N":"check","card":"?","diag":"0|0||tokenize","C":[{"N":"data","diag":"0|0||tokenize","C":[{"N":"varRef","name":"Q{}files","slot":"0"}]}]}]}]}]}]},{"N":"str","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"}]},{"N":"fn","name":"starts-with","C":[{"N":"treat","as":"AS","diag":"0|0||starts-with","C":[{"N":"check","card":"?","diag":"0|0||starts-with","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||starts-with","C":[{"N":"atomSing","diag":"0|0||starts-with","card":"?","C":[{"N":"dot"}]}]}]}]},{"N":"fn","name":"concat","C":[{"N":"check","card":"?","diag":"undefined|0||concat","C":[{"N":"data","diag":"undefined|0||concat","C":[{"N":"varRef","name":"Q{}identifier","slot":"1"}]}]},{"N":"str","val":"-"}]},{"N":"str","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"}]}]},{"N":"fn","name":"matches","C":[{"N":"treat","as":"AS","diag":"0|0||matches","C":[{"N":"check","card":"?","diag":"0|0||matches","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||matches","C":[{"N":"atomSing","diag":"0|0||matches","card":"?","C":[{"N":"dot"}]}]}]}]},{"N":"treat","as":"AS","diag":"0|1||matches","C":[{"N":"check","card":"1","diag":"0|1||matches","C":[{"N":"cvUntyped","to":"AS","diag":"0|1||matches","C":[{"N":"check","card":"1","diag":"0|1||matches","C":[{"N":"data","diag":"0|1||matches","C":[{"N":"varRef","name":"Q{}page-identifier-regex","slot":"2"}]}]}]}]}]}]}]},{"N":"let","var":"Q{}surfaces","slot":"5","sType":"* ","line":"22","C":[{"N":"forEach","sType":"*ND","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"22","C":[{"N":"forEach","C":[{"N":"varRef","name":"Q{}surface-files","slot":"4"},{"N":"fn","name":"resolve-uri","C":[{"N":"treat","as":"AS","diag":"0|0||resolve-uri","C":[{"N":"check","card":"?","diag":"0|0||resolve-uri","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||resolve-uri","C":[{"N":"atomSing","diag":"0|0||resolve-uri","card":"?","C":[{"N":"dot"}]}]}]}]},{"N":"treat","as":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"cvUntyped","to":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"data","diag":"0|1||resolve-uri","C":[{"N":"varRef","name":"Q{}base-uri","slot":"3"}]}]}]}]}]}]}]},{"N":"fn","name":"doc","C":[{"N":"convert","to":"AS","flags":"","C":[{"N":"dot"}]}]}]},{"N":"let","var":"Q{}ro-crate","slot":"6","sType":"* ","line":"25","C":[{"N":"fn","name":"json-doc","sType":"?","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"25","C":[{"N":"convert","to":"AS","flags":"","C":[{"N":"fn","name":"resolve-uri","C":[{"N":"str","val":"ro-crate-metadata.json"},{"N":"treat","as":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"cvUntyped","to":"AS","diag":"0|1||resolve-uri","C":[{"N":"check","card":"1","diag":"0|1||resolve-uri","C":[{"N":"data","diag":"0|1||resolve-uri","C":[{"N":"varRef","name":"Q{}base-uri","slot":"3"}]}]}]}]}]}]}]}]},{"N":"let","var":"Q{}ro-crate-properties","slot":"7","sType":"* ","line":"26","C":[{"N":"lookupAll","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"26","C":[{"N":"treat","as":"F","diag":"null|0||lookupAll","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"check","card":"1","diag":"0|0|XPTY0004|apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"varRef","name":"Q{}ro-crate","slot":"6"}]}]},{"N":"arrayBlock","C":[{"N":"str","val":"@graph"}]}]}]}]},{"N":"let","var":"Q{}ro-crate-root-id","slot":"8","sType":"* ","line":"36","C":[{"N":"forEach","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"36","C":[{"N":"forEach","C":[{"N":"filter","C":[{"N":"varRef","name":"Q{}ro-crate-properties","slot":"7"},{"N":"fn","name":"starts-with","C":[{"N":"treat","as":"AS","diag":"0|0||starts-with","C":[{"N":"check","card":"?","diag":"0|0||starts-with","C":[{"N":"cvUntyped","to":"AS","diag":"0|0||starts-with","C":[{"N":"check","card":"?","diag":"0|0||starts-with","C":[{"N":"data","diag":"0|0||starts-with","C":[{"N":"forEach","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"conformsTo"}]}]},{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"@id"}]}]}]}]}]}]}]}]},{"N":"str","val":"https://w3id.org/ro/crate/"},{"N":"str","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"}]}]},{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"about"}]}]}]},{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"@id"}]}]}]},{"N":"let","var":"Q{}ro-crate-root-properties","slot":"9","sType":"* ","line":"40","C":[{"N":"filter","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"40","C":[{"N":"varRef","name":"Q{}ro-crate-properties","slot":"7"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"data","diag":"1|0||gc","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"dot"}]},{"N":"arrayBlock","C":[{"N":"str","val":"@id"}]}]}]},{"N":"data","diag":"1|1||gc","C":[{"N":"varRef","name":"Q{}ro-crate-root-id","slot":"8"}]}]}]},{"N":"resultDoc","sType":"0 ","line":"42","local":"","global":"indent=yes\nmethod=xml\n","C":[{"N":"fn","name":"concat","sType":"1AS ","role":"href","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"varRef","name":"Q{}identifier","slot":"1","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"42"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]},{"N":"str","sType":"1AS ","val":"-tei-complete.xml"},{"N":"str","sType":"1AS ","val":""}]},{"N":"elem","name":"TEI","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}TEI ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","role":"content","line":"43","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"xml:id","nsuri":"http://www.w3.org/XML/1998/namespace","sType":"1NA ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"varRef","name":"Q{}identifier","slot":"1","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"43"}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"elem","name":"teiHeader","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}teiHeader ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"44","C":[{"N":"elem","name":"fileDesc","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}fileDesc ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"45","C":[{"N":"sequence","sType":"*NE ","C":[{"N":"elem","name":"titleStmt","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}titleStmt ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"46","C":[{"N":"elem","name":"title","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}title ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"47","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"47","C":[{"N":"check","card":"1","diag":"0|0|XPTY0004|apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"varRef","name":"Q{}ro-crate-root-properties","slot":"9"}]}]},{"N":"arrayBlock","C":[{"N":"str","val":"name"}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]},{"N":"elem","name":"publicationStmt","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}publicationStmt ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"49","C":[{"N":"elem","name":"publisher","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}publisher ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"50","C":[{"N":"elem","name":"ref","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}ref ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","C":[{"N":"sequence","sType":"*N ","C":[{"N":"att","name":"target","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"https://nyingarn.net/"}]},{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"Nyingarn"}]}]}]}]}]},{"N":"elem","name":"sourceDesc","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}sourceDesc ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"52","C":[{"N":"elem","name":"p","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}p ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"53","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"*","C":[{"N":"ifCall","name":"Q{http://saxon.sf.net/}apply","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","line":"53","C":[{"N":"check","card":"1","diag":"0|0|XPTY0004|apply","C":[{"N":"treat","as":"F","diag":"0|0|XPTY0004|apply","C":[{"N":"varRef","name":"Q{}ro-crate-root-properties","slot":"9"}]}]},{"N":"arrayBlock","C":[{"N":"str","val":"description"}]}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]}]}]}]},{"N":"elem","name":"xenoData","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}xenoData ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"55","C":[{"N":"sequence","sType":"* ","C":[{"N":"att","name":"type","nsuri":"","sType":"1NA ","C":[{"N":"str","sType":"1AS ","val":"application/ld+json"}]},{"N":"fn","name":"serialize","sType":"1AS","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"56","C":[{"N":"varRef","name":"Q{}ro-crate","slot":"6"},{"N":"map","C":[{"N":"str","val":"method"},{"N":"str","val":"json"},{"N":"str","val":"indent"},{"N":"true"}]}]}]}]}]}]}]},{"N":"elem","name":"text","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}text ","nsuri":"http://www.tei-c.org/ns/1.0","namespaces":"=http://www.tei-c.org/ns/1.0","line":"60","C":[{"N":"let","var":"Q{}text-content","slot":"10","sType":"* ","line":"61","C":[{"N":"doc","sType":"1ND ","base":"file:///srv/tasks/src/xslt/reconstitute.xsl","role":"select","C":[{"N":"applyT","sType":"* ","line":"62","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"varRef","name":"Q{}surfaces","slot":"5","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"62"}]}]},{"N":"applyT","sType":"* ","line":"64","mode":"Q{}reconstitute","bSlot":"1","C":[{"N":"varRef","name":"Q{}text-content","slot":"10","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"64"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]},{"N":"co","id":"1","uniform":"true","binds":"1","C":[{"N":"template","flags":"os","module":"reconstitute.xsl","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","name":"Q{}reconstitute","line":"104","expand-text":"true","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","sType":"* ","C":[{"N":"sequence","role":"body","sType":"* ","C":[{"N":"param","name":"Q{}content","slot":"0","sType":"* ","as":"* ","flags":"","line":"110","C":[{"N":"str","sType":"1AS ","val":"","role":"select"},{"N":"supplied","role":"conversion","slot":"0","sType":"* "}]},{"N":"comment","sType":"1NC ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"fn","name":"string-join","C":[{"N":"sequence","sType":"*AS ","C":[{"N":"str","sType":"1AS ","val":"reconstitute "},{"N":"fn","name":"string-join","sType":"1AS ","C":[{"N":"convert","type":"AS*","from":"AZ","to":"AS","C":[{"N":"data","C":[{"N":"mergeAdj","sType":"1ADI","C":[{"N":"fn","name":"count","sType":"1ADI","ns":"= xml=~ fn=~ xsl=~ ","line":"117","C":[{"N":"varRef","name":"Q{}content","slot":"0"}]}]}]}]},{"N":"str","sType":"1AS ","val":" "}]},{"N":"str","sType":"1AS ","val":" nodes"}]},{"N":"str","sType":"1AS ","val":""}]}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"forEachGroup","sType":"* ","algorithm":"starting","line":"118","C":[{"N":"varRef","name":"Q{}content","slot":"0","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"118"},{"N":"p.venn","op":"union","role":"match","sType":"1NE","C":[{"N":"p.withPredicate","role":"match","sType":"1NE","C":[{"N":"p.nodeTest","test":"NE"},{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","C":[{"N":"attVal","name":"Q{}part"},{"N":"str","val":"I"}]}]},{"N":"p.withPredicate","role":"match","sType":"1N u[NT,NP,NC,NE]","C":[{"N":"p.withPredicate","C":[{"N":"p.nodeTest","test":"N u[NT,NP,NC,NE]"},{"N":"fn","name":"not","C":[{"N":"axis","name":"self","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}pb"}]}]},{"N":"fn","name":"not","C":[{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}part"}]}]}]},{"N":"str","sType":"1AS ","role":"collation","val":"http://www.w3.org/2005/xpath-functions/collation/codepoint"},{"N":"sequence","role":"content","sType":"* ","C":[{"N":"comment","sType":"1NC ","C":[{"N":"fn","name":"string-join","role":"select","C":[{"N":"forEach","sType":"*AS ","C":[{"N":"data","sType":"*A ","C":[{"N":"mergeAdj","C":[{"N":"valueOf","sType":"1NT ","C":[{"N":"str","sType":"1AS ","val":"start of group"}]}]}]},{"N":"fn","name":"string","sType":"1AS ","C":[{"N":"dot"}]}]},{"N":"str","sType":"1AS ","val":" "}]}]},{"N":"choose","sType":"* ","type":"item()*","line":"120","C":[{"N":"gc","op":"=","comp":"GAC|http://www.w3.org/2005/xpath-functions/collation/codepoint","card":"1:1","sType":"1AB","ns":"= xml=~ fn=~ xsl=~ ","line":"121","C":[{"N":"attVal","name":"Q{}part"},{"N":"str","val":"I"}]},{"N":"copy","sType":"1 ","flags":"cin","line":"124","C":[{"N":"sequence","sType":"* ","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","line":"125","sType":"*NA","C":[{"N":"except","op":"except","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"125","C":[{"N":"axis","name":"attribute","nodeTest":"*NA"},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}part"}]}]},{"N":"callT","bSlot":"0","sType":"* ","name":"Q{}reconstitute","line":"126","C":[{"N":"withParam","name":"Q{}content","slot":"0","sType":"*N","C":[{"N":"docOrder","sType":"*N","role":"select","line":"127","C":[{"N":"docOrder","sType":"*N","ns":"= xml=~ fn=~ xsl=~ ","C":[{"N":"slash","op":"/","C":[{"N":"treat","as":"N","diag":"1|0|XPTY0019|slash","C":[{"N":"currentGroup"}]},{"N":"union","op":"|","C":[{"N":"axis","name":"self","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}pb"},{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]"}]}]}]}]}]}]}]}]},{"N":"true"},{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","line":"133","sType":"*","C":[{"N":"currentGroup","sType":"*","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"133"}]}]}]}]}]}]}]},{"N":"co","id":"2","binds":"2","C":[{"N":"mode","onNo":"SC","flags":"","patternSlots":"0","name":"Q{}surface-to-text","prec":"","C":[{"N":"templateRule","rank":"0","prec":"0","seq":"2","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","minImp":"0","flags":"s","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"93","module":"reconstitute.xsl","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","expand-text":"true","match":"line[preceding-sibling::*[1]/self::line]","prio":"0.5","matches":"NE nQ{http://www.tei-c.org/ns/1.0}line","C":[{"N":"p.withPredicate","role":"match","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}line","ns":"= xml=~ fn=~ xsl=~ ","C":[{"N":"p.nodeTest","test":"NE nQ{http://www.tei-c.org/ns/1.0}line"},{"N":"slash","op":"/","C":[{"N":"fn","name":"reverse","C":[{"N":"first","C":[{"N":"axis","name":"preceding-sibling","nodeTest":"*NE"}]}]},{"N":"axis","name":"self","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}line"}]}]},{"N":"empty","sType":"0 ","role":"action"}]},{"N":"templateRule","rank":"1","prec":"0","seq":"1","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","minImp":"0","flags":"s","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"81","module":"reconstitute.xsl","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","expand-text":"true","match":"line","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}line","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}line","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}line","ns":"= xml=~ fn=~ xsl=~ "},{"N":"elem","type":"element()","role":"action","name":"ab","sType":"1NE ","nsuri":"http://www.tei-c.org/ns/1.0","line":"82","C":[{"N":"sequence","sType":"* ","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","line":"83","sType":"*NA","C":[{"N":"axis","name":"attribute","nodeTest":"*NA","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"83"}]},{"N":"applyT","sType":"* ","line":"84","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]","sType":"*N u[NT,NP,NC,NE]","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"84"}]},{"N":"forEach","sType":"* ","line":"85","C":[{"N":"docOrder","sType":"*N","role":"select","line":"85","C":[{"N":"fn","name":"key","sType":"*N","ns":"= xml=~ fn=~ xsl=~ ","C":[{"N":"str","val":"lines-by-first-line-id"},{"N":"fn","name":"generate-id","C":[{"N":"dot"}]}]}]},{"N":"sequence","sType":"* ","C":[{"N":"elem","type":"element()","name":"lb","sType":"1NE ","nsuri":"http://www.tei-c.org/ns/1.0","line":"86","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","sType":"*NA","C":[{"N":"axis","name":"attribute","nodeTest":"*NA","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"7"}]}]},{"N":"applyT","sType":"* ","line":"87","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]","sType":"*N u[NT,NP,NC,NE]","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"87"}]}]}]}]}]}]},{"N":"templateRule","rank":"2","prec":"0","seq":"0","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","minImp":"0","flags":"s","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"73","module":"reconstitute.xsl","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","expand-text":"true","match":"surface","prio":"0","matches":"NE nQ{http://www.tei-c.org/ns/1.0}surface","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}surface","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}surface","ns":"= xml=~ fn=~ xsl=~ "},{"N":"sequence","role":"action","sType":"* ","C":[{"N":"elem","type":"element()","name":"pb","sType":"1NE ","nsuri":"http://www.tei-c.org/ns/1.0","line":"74","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","sType":"*NA","C":[{"N":"axis","name":"attribute","nodeTest":"*NA","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"3"}]}]},{"N":"applyT","sType":"* ","line":"75","mode":"Q{}surface-to-text","bSlot":"0","C":[{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]","sType":"*N u[NT,NP,NC,NE]","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"75"}]}]}]}]}]},{"N":"co","binds":"","id":"3","C":[{"N":"mode","onNo":"TC","flags":"","patternSlots":"0","prec":""}]},{"N":"co","id":"4","binds":"1","C":[{"N":"mode","onNo":"TC","flags":"","patternSlots":"0","name":"Q{}reconstitute","prec":"","C":[{"N":"templateRule","rank":"0","prec":"0","seq":"3","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","minImp":"0","flags":"s","slots":"200","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"95","module":"reconstitute.xsl","xpath-default-namespace":"http://www.tei-c.org/ns/1.0","expand-text":"true","match":"*[*/@part]","prio":"0.5","matches":"NE","C":[{"N":"p.withPredicate","role":"match","sType":"1NE","ns":"= xml=~ fn=~ xsl=~ ","C":[{"N":"p.nodeTest","test":"NE"},{"N":"slash","op":"/","C":[{"N":"axis","name":"child","nodeTest":"*NE"},{"N":"axis","name":"attribute","nodeTest":"*NA nQ{}part"}]}]},{"N":"copy","sType":"1NE ","flags":"cin","role":"action","line":"96","C":[{"N":"sequence","sType":"* ","C":[{"N":"copyOf","flags":"c","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0 ex=http://ns.saxonica.com/xslt/export","line":"97","sType":"*NA","C":[{"N":"axis","name":"attribute","nodeTest":"*NA","sType":"*NA","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"97"}]},{"N":"callT","bSlot":"0","sType":"* ","name":"Q{}reconstitute","line":"98","C":[{"N":"withParam","name":"Q{}content","slot":"0","sType":"*N u[NT,NP,NC,NE]","C":[{"N":"axis","name":"child","nodeTest":"*N u[NT,NP,NC,NE]","sType":"*N u[NT,NP,NC,NE]","ns":"= xml=~ fn=~ xsl=~ ","role":"select","line":"99"}]}]}]}]}]}]}]},{"N":"overridden"},{"N":"key","name":"Q{}lines-by-first-line-id","binds":"1","flags":"u","module":"reconstitute.xsl","ns":"xml=~ xsl=~ =http://www.tei-c.org/ns/1.0","baseUri":"file:///srv/tasks/src/xslt/reconstitute.xsl","line":"80","C":[{"N":"p.nodeTest","role":"match","test":"NE nQ{http://www.tei-c.org/ns/1.0}line","sType":"1NE nQ{http://www.tei-c.org/ns/1.0}line","ns":"= xml=~ fn=~ xsl=~ "},{"N":"data","role":"use","C":[{"N":"data","C":[{"N":"fn","name":"generate-id","sType":"1AS","ns":"= xml=~ fn=~ xsl=~ ","line":"80","C":[{"N":"fn","name":"reverse","C":[{"N":"lastOf","C":[{"N":"axis","name":"preceding-sibling","nodeTest":"*NE nQ{http://www.tei-c.org/ns/1.0}line"}]}]}]}]}]}]},{"N":"output","C":[{"N":"property","name":"Q{http://saxon.sf.net/}stylesheet-version","value":"30"},{"N":"property","name":"indent","value":"yes"},{"N":"property","name":"method","value":"xml"}]},{"N":"decimalFormat"}],"Σ":"f5350a46"}
>>>>>>> 387c0c3 (update compiled XSLT)
